<!DOCTYPE html>
<meta charset="utf-8">
<style>
text{
	font-size:12px;
}
.mainBars rect{
  shape-rendering: auto;
  fill-opacity: 0;
  stroke-width: 0.5px;
  stroke: rgb(0, 0, 0);
  stroke-opacity: 0;
}
.subBars{
	shape-rendering:crispEdges;
}
.edges{
	stroke:none;
	fill-opacity:0.5;
}
.header{
	text-anchor:middle;
	font-size:16px;
}
line{
	stroke:grey;
}
</style>
<body>
<script src="https://d3js.org/d3.v4.min.js"></script>
<script src="http://vizjs.org/viz.v1.1.0.min.js"></script>
<script>

var data=[['Chronic lower respiratory diseases ', 'American Indian or Alaska Native', 2003, 34.4], ['Diabetes mellitus ', 'Black, not Hispanic or Latino', 2009, 40.0], ['Nephritis, nephrotic syndrome and nephrosis ', 'Male', 1996, 0.0], ['Homicide ', 'Male', 1960, 0.0], ['Motor vehicle-related injuries', 'Female', 2000, 9.5], ['Unintentional injuries', 'White', 2016, 50.4], ['Colon, rectum, and anus', 'White', 1997, 0.0], ['Influenza and pneumonia ', 'Hispanic or Latino', 2014, 12.8], ['Colon, rectum, and anus', 'American Indian or Alaska Native', 2014, 10.9], ['Drug overdose', 'Asian or Pacific Islander', 1989, 0.0], ['Influenza and pneumonia ', 'White, not Hispanic or Latino', 2011, 15.7], ['Malignant neoplasms', 'Female', 2013, 139.5], ['Trachea, bronchus, and lung', 'Male', 2016, 46.7], ['Suicide ', 'Asian or Pacific Islander', 2004, 5.7], ['Cerebrovascular diseases', 'White', 2006, 42.9], ['Chronic lower respiratory diseases ', 'Black or African American', 1980, 0.0], ['Ischemic heart disease', 'Female', 1982, 0.0], ['Drug overdose', 'Black or African American', 1989, 0.0], ['Colon, rectum, and anus', 'Asian or Pacific Islander', 1994, 0.0], ['Nephritis, nephrotic syndrome and nephrosis ', 'Asian or Pacific Islander', 2001, 9.0], ['Influenza and pneumonia ', 'Black or African American', 1987, 0.0], ['Unintentional injuries', 'White, not Hispanic or Latino', 2007, 43.6], ['Drug overdose', 'White', 1983, 0.0], ['Motor vehicle-related injuries', 'Black or African American', 1994, 0.0], ['Influenza and pneumonia ', 'White', 1990, 0.0], ['Cerebrovascular diseases', 'Asian or Pacific Islander', 2009, 33.0], ['Chronic liver disease and cirrhosis', 'Hispanic or Latino', 2010, 13.7], ['Drug overdose', 'Black or African American', 1984, 0.0], ['Motor vehicle-related injuries', 'White, not Hispanic or Latino', 1997, 0.0], ['Suicide ', 'Asian or Pacific Islander', 2003, 5.6], ['Influenza and pneumonia ', 'White, not Hispanic or Latino', 1981, 0.0], ['Trachea, bronchus, and lung', 'Male', 1950, 0.0], ['Drug overdose', 'White, not Hispanic or Latino', 1990, 0.0], ['Diseases of heart', 'Female', 1995, 0.0], ['Chronic lower respiratory diseases ', 'Black or African American', 1991, 0.0], ['Human immunodeficiency virus (HIV) disease', 'American Indian or Alaska Native', 2009, 1.7], ['Diabetes mellitus ', 'White, not Hispanic or Latino', 2000, 21.8], ['Drug overdose', 'Black or African American', 1997, 0.0], ['Diseases of heart', 'White, not Hispanic or Latino', 1982, 0.0], ['Chronic lower respiratory diseases ', 'Male', 2016, 45.1], ['Influenza and pneumonia ', 'White', 1984, 0.0], ['Unintentional injuries', 'White', 2005, 40.7], ['Human immunodeficiency virus (HIV) disease', 'White', 2009, 1.5], ['Colon, rectum, and anus', 'Male', 2009, 19.1], ['Nephritis, nephrotic syndrome and nephrosis ', 'Male', 2003, 18.2], ["Alzheimer's disease ", 'Black or African American', 1986, 0.0], ['Nephritis, nephrotic syndrome and nephrosis ', 'Black, not Hispanic or Latino', 2008, 30.6], ['Diseases of heart', 'Hispanic or Latino', 1987, 0.0], ['Diabetes mellitus ', 'White, not Hispanic or Latino', 2002, 22.3], ['Diabetes mellitus ', 'White', 1986, 0.0], ["Alzheimer's disease ", 'Female', 2008, 28.2], ['Trachea, bronchus, and lung', 'Hispanic or Latino', 2005, 23.3], ['Human immunodeficiency virus (HIV) disease', 'White', 2005, 2.2], ['Ischemic heart disease', 'Male', 2016, 128.3], ['Motor vehicle-related injuries', 'Hispanic or Latino', 1994, 0.0], ['Chronic liver disease and cirrhosis', 'Hispanic or Latino', 1989, 0.0], ['Malignant neoplasms', 'Female', 2002, 163.7], ['Suicide ', 'Female', 1999, 4.0], ['Colon, rectum, and anus', 'White, not Hispanic or Latino', 2013, 14.5], ['Nephritis, nephrotic syndrome and nephrosis ', 'Black, not Hispanic or Latino', 1984, 0.0], ['Nephritis, nephrotic syndrome and nephrosis ', 'Asian or Pacific Islander', 2012, 8.0], ['Influenza and pneumonia ', 'White', 1987, 0.0], ['Human immunodeficiency virus (HIV) disease', 'Asian or Pacific Islander', 1992, 0.0], ['Cerebrovascular diseases', 'Black, not Hispanic or Latino', 1985, 0.0], ['Diabetes mellitus ', 'Asian or Pacific Islander', 1990, 0.0], ["Alzheimer's disease ", 'American Indian or Alaska Native', 1997, 0.0], ['Diseases of heart', 'White', 2005, 213.2], ['Diabetes mellitus ', 'Female', 1996, 0.0], ['Unintentional injuries', 'Black or African American', 1970, 0.0], ['Prostate', 'Male', 2011, 20.7], ['Nephritis, nephrotic syndrome and nephrosis ', 'Hispanic or Latino', 1992, 0.0], ['Human immunodeficiency virus (HIV) disease', 'White, not Hispanic or Latino', 1980, 0.0], ['Chronic lower respiratory diseases ', 'Female', 2015, 38.6], ['Influenza and pneumonia ', 'Black, not Hispanic or Latino', 2016, 15.4], ['Diabetes mellitus ', 'White, not Hispanic or Latino', 1998, 0.0], ['Chronic liver disease and cirrhosis', 'White', 1950, 0.0], ["Alzheimer's disease ", 'American Indian or Alaska Native', 2007, 14.3], ['Ischemic heart disease', 'Asian or Pacific Islander', 1970, 0.0], ['Nephritis, nephrotic syndrome and nephrosis ', 'Black, not Hispanic or Latino', 1987, 0.0], ['Chronic lower respiratory diseases ', 'American Indian or Alaska Native', 1983, 0.0], ['Chronic liver disease and cirrhosis', 'Black or African American', 1983, 0.0], ['Malignant neoplasms', 'White, not Hispanic or Latino', 1980, 0.0], ['Malignant neoplasms', 'Black or African American', 1986, 0.0], ['Prostate', 'Male', 1981, 0.0], ['Diabetes mellitus ', 'White, not Hispanic or Latino', 1983, 0.0], ['Suicide ', 'American Indian or Alaska Native', 1996, 0.0], ['Cerebrovascular diseases', 'American Indian or Alaska Native', 2002, 40.8], ['Influenza and pneumonia ', 'Hispanic or Latino', 1990, 0.0], ['Motor vehicle-related injuries', 'Female', 1984, 0.0], ['Diseases of heart', 'White', 1998, 0.0], ['Colon, rectum, and anus', 'American Indian or Alaska Native', 1985, 0.0], ['Chronic liver disease and cirrhosis', 'Female', 2013, 6.8], ['Unintentional injuries', 'White', 1988, 0.0], ['Human immunodeficiency virus (HIV) disease', 'Black or African American', 1989, 0.0], ['Chronic liver disease and cirrhosis', 'Hispanic or Latino', 1992, 0.0], ['Diabetes mellitus ', 'Black, not Hispanic or Latino', 1986, 0.0], ['Cerebrovascular diseases', 'Male', 1990, 0.0], ['Motor vehicle-related injuries', 'American Indian or Alaska Native', 1950, 0.0], ['Cerebrovascular diseases', 'Male', 2006, 45.2], ['Ischemic heart disease', 'Black, not Hispanic or Latino', 1984, 0.0]];

var color = {
"Breast": "#3366CC",  
"Diseases of heart":"#3366CC",
"Ischemic heart disease":"#3366CC",
"Cerebrovascular diseases":"#3366CC",
"Malignant neoplasms":"#3366CC",
"Trachea, bronchus, and lung":"#3366CC",
"Colon, rectum, and anus":"#3366CC",
"Prostate":"#3366CC",
"Chronic lower respiratory diseases ":"#3366CC",
"Influenza and pneumonia ":"#3366CC",
"Chronic liver disease and cirrhosis":"#3366CC",
"Diabetes mellitus ":"#3366CC",
"Alzheimer's disease ":"#3366CC",
"Human immunodeficiency virus (HIV) disease":"#3366CC",
"Unintentional injuries":"#3366CC",
"Motor vehicle-related injuries":"#3366CC",
"Drug overdose":"#3366CC",
"Nephritis, nephrotic syndrome and nephrosis ":"#3366CC",
"Suicide ":"#3366CC",
"Homicide " :"#3366CC"};

var svg = d3.select("body").append("svg").attr("width", 1200).attr("height", 800);

svg.append("text").attr("x",700).attr("y",70)
	.attr("class","header").text("Death Rate");

var g =[svg.append("g").attr("transform","translate(500,100)")];

var bp=[ viz.bP()
		.data(data)
		.value(d=>d[3])
		.min(12)
		.pad(1)
		.height(650)
		.width(400)
		.barSize(35)
		.fill(d=>color[d.primary])
];
		
[0].forEach(function(i){
	g[i].call(bp[i])
	
	g[i].append("text").attr("x",-50).attr("y",-8).style("text-anchor","middle").text("Disease");
	g[i].append("text").attr("x", 450).attr("y",-8).style("text-anchor","middle").text("Category");
	
	g[i].append("line").attr("x1",-100).attr("x2",0);
	g[i].append("line").attr("x1",400).attr("x2",500);
	
	g[i].selectAll(".mainBars")
		.on("mouseover",mouseover)
		.on("mouseout",mouseout);

	g[i].selectAll(".mainBars").append("text").attr("class","label")
		.attr("x",d=>(d.part=="primary"? -25: 30))
		.attr("y",d=>+6)
		.text(d=>d.key)
		.attr("text-anchor",d=>(d.part=="primary"? "end": "start"));
	
	g[i].selectAll(".mainBars").append("text").attr("class","perc")
		.attr("x",d=>(d.part=="primary"? -300: 200))
        .attr("y",d=>+6)
        .text(function(d) {return d3.format(".1f")(d.value);})
		//.text(function(d){ return d3.format("0.0%")(d.percent)})
		.attr("text-anchor",d=>(d.part=="primary"? "end": "start"));
});

function mouseover(d){
	[0,1].forEach(function(i){
		bp[i].mouseover(d);
		
        g[i].selectAll(".mainBars").select(".label")
        .text(function(d) {return d.key});
		//.text(function(d){ return d3.format("0.0%")(d.percent)});
	});
}
function mouseout(d){
	[0,1].forEach(function(i){
		bp[i].mouseout(d);
		
        g[i].selectAll(".mainBars").select(".perc")
        .text(function(d) {return (d.key, d3.format(".1f")(d.value))});
		//.text(function(d){ return d3.format("0.0%")(d.percent)});
	});
}
d3.select(self.frameElement).style("height", "800px");
</script>
</body>
</html>